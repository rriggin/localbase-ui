<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Ads Performance - LocalBase</title>
    
    <!-- External CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    
    <style>
        :root {
            /* LocalBase color palette adapted from Tide */
            --lb-blue: #5F8DFF;
            --lb-blue-dark: #3A6FE3;
            --lb-blue-light: #7BA4FF;
            --lb-black: #1E1E2E;
            --lb-gray-dark: #2A2A3C;
            --lb-gray-medium: #383850;
            --lb-gray-light: #4A4A65;
            --lb-green: #5DD6C7;
            --lb-green-light: #7FEDDF;
            --lb-white: #FFFFFF;
            --lb-orange: #FFB366;
            --lb-purple: #B794F6;
            
            /* UI palette */
            --background-dark: var(--lb-black);
            --background-sidebar: #252538;
            --text-color: var(--lb-white);
            --secondary-text: #B8B8D0;
            --border-color: #404060;
            --input-background: var(--lb-gray-dark);
            --primary-color: var(--lb-blue);
            --primary-hover: var(--lb-blue-light);
            --accent-color: var(--lb-green);
            --success-color: var(--lb-green);
            --warning-color: var(--lb-orange);
            --info-color: var(--lb-purple);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            background-color: var(--background-dark);
            color: var(--text-color);
            line-height: 1.6;
        }

        /* Header */
        .header {
            background-color: var(--background-sidebar);
            border-bottom: 1px solid var(--border-color);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-color);
        }

        .logo .highlight {
            color: var(--primary-color);
        }

        .nav-items {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .nav-item {
            color: var(--secondary-text);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.2s;
        }

        .nav-item:hover {
            color: var(--text-color);
        }

        .nav-item.active {
            color: var(--primary-color);
        }

        /* Main Layout */
        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
            min-height: calc(100vh - 80px);
        }

        /* Content Sections */
        .content-section {
            margin-bottom: 40px;
        }

        .section-header {
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 28px;
            font-weight: 600;
            color: var(--text-color);
            margin-bottom: 8px;
        }

        .section-subtitle {
            color: var(--secondary-text);
            font-size: 16px;
        }

        /* Cards */
        .card {
            background-color: var(--lb-gray-dark);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .card-header {
            margin-bottom: 16px;
        }

        .card-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-color);
            margin-bottom: 4px;
        }

        .card-subtitle {
            color: var(--secondary-text);
            font-size: 14px;
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            border-radius: 8px;
            border: none;
            font-weight: 500;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: var(--lb-white);
        }

        .btn-primary:hover {
            background-color: var(--primary-hover);
        }

        .btn-secondary {
            background-color: var(--lb-gray-medium);
            color: var(--text-color);
        }

        .btn-secondary:hover {
            background-color: var(--lb-gray-light);
        }

        /* Grid Layout */
        .grid {
            display: grid;
            gap: 20px;
        }

        .grid-2 {
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }

        /* Utilities */
        .text-center {
            text-align: center;
        }

        .text-muted {
            color: var(--secondary-text);
        }

        .mb-2 { margin-bottom: 16px; }
        .mb-3 { margin-bottom: 24px; }

        /* Chart Specific Styles */
        .chart-container {
            background-color: var(--lb-gray-dark);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--border-color);
        }

        .chart-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
            padding: 16px;
            background-color: var(--lb-gray-medium);
            border-radius: 8px;
        }

        .control-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .control-group label {
            font-weight: 500;
            font-size: 14px;
            color: var(--text-color);
        }

        select {
            padding: 6px 10px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background-color: var(--input-background);
            color: var(--text-color);
            font-size: 14px;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            padding: 6px 12px;
            border-radius: 6px;
            transition: background-color 0.2s;
        }

        .legend-item:hover {
            background-color: var(--lb-gray-medium);
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 2px;
        }

        .legend-label {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-color);
        }

        .chart-svg {
            width: 100%;
            height: 400px;
            background-color: var(--lb-gray-medium);
            border-radius: 8px;
        }

        /* D3 Chart Styles */
        .line {
            fill: none;
            stroke-width: 2.5;
        }

        .axis {
            font-size: 12px;
            color: var(--secondary-text);
        }

        .axis text {
            fill: var(--secondary-text);
        }

        .axis path,
        .axis line {
            stroke: var(--border-color);
        }

        .grid-line {
            stroke: var(--border-color);
            stroke-width: 1;
            opacity: 0.3;
        }

        .tooltip {
            position: absolute;
            background: rgba(30, 30, 46, 0.95);
            color: var(--text-color);
            padding: 12px;
            border-radius: 8px;
            font-size: 12px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            border: 1px solid var(--border-color);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .tooltip-title {
            font-weight: 600;
            margin-bottom: 6px;
            font-size: 13px;
            color: var(--text-color);
        }

        .tooltip-item {
            display: flex;
            align-items: center;
            gap: 6px;
            margin: 3px 0;
            color: var(--text-color);
        }

        .tooltip-color {
            width: 8px;
            height: 8px;
            border-radius: 1px;
        }

        .hover-line {
            stroke: var(--secondary-text);
            stroke-width: 1;
            stroke-dasharray: 3,3;
            opacity: 0;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">
                Local<span class="highlight">Base</span>
            </div>
            <nav class="nav-items">
                <a href="index.html" class="nav-item">
                    <i class="fas fa-home"></i>
                    App Home
                </a>
                <a href="dashboard.html" class="nav-item">
                    <i class="fas fa-chart-bar"></i>
                    Dashboard
                </a>
                <a href="gallery.html" class="nav-item">
                    <i class="fas fa-layer-group"></i>
                    Gallery
                </a>
                <a href="#" class="nav-item active">
                    <i class="fas fa-chart-line"></i>
                    Google Ads Performance
                </a>
            </nav>
        </div>
    </header>

    <main class="main-container">
        <div class="content-section">
            <div class="section-header text-center">
                <h1 class="section-title">
                    <i class="fas fa-chart-line" style="color: var(--primary-color); margin-right: 12px;"></i>
                    Google Ads Performance
                </h1>
                <p class="section-subtitle">Daily spend and performance metrics across campaigns</p>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Chart Controls</h2>
                <p class="card-subtitle">Configure your multi-line chart display options</p>
            </div>
            
            <div class="chart-controls">
                <div class="control-group">
                    <label for="timeRange">Time Range:</label>
                    <select id="timeRange">
                        <option value="all">All Time</option>
                        <option value="30">Last 30 Days</option>
                        <option value="90" selected>Last 90 Days</option>
                    </select>
                </div>
                <div class="control-group">
                    <button class="btn btn-secondary" onclick="toggleAllLines()">
                        <i class="fas fa-eye"></i>
                        Toggle All
                    </button>
                    <button class="btn btn-secondary" onclick="resetZoom()">
                        <i class="fas fa-expand-arrows-alt"></i>
                        Reset View
                    </button>
                </div>
            </div>

            <div class="legend" id="legend"></div>
            
            <div class="chart-container">
                <svg class="chart-svg" id="chartSvg"></svg>
            </div>
        </div>

        <div class="grid grid-2">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-info-circle" style="color: var(--info-color);"></i>
                        Usage Instructions
                    </h3>
                </div>
                <ul style="color: var(--secondary-text); line-height: 1.6;">
                    <li><strong>Hover:</strong> Show detailed tooltips with data values</li>
                    <li><strong>Legend:</strong> Click series names to toggle visibility</li>
                    <li><strong>Time Range:</strong> Filter data to specific time periods</li>
                    <li><strong>Toggle All:</strong> Show/hide all data series at once</li>
                    <li><strong>Reset View:</strong> Return to original zoom and scale</li>
                </ul>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-download" style="color: var(--success-color);"></i>
                        Export Options
                    </h3>
                </div>
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <button class="btn btn-primary" onclick="exportData()">
                        <i class="fas fa-file-csv"></i>
                        Export CSV
                    </button>
                    <button class="btn btn-secondary" onclick="exportImage()">
                        <i class="fas fa-image"></i>
                        Export PNG
                    </button>
                </div>
            </div>
        </div>
    </main>

    <div class="tooltip" id="tooltip"></div>

    <script>
        // Google Ads campaign data
        const sampleData = [
  {
    "date": "2025-05-03",
    "roofmaxx_kc_roof_restoration": 127.73,
    "kc_roof_restoration": 67.67,
    "roofmaxx_storm_damage": 174.88,
    "roof_maintenance_services": 66.15,
    "commercial_roofing_kc": 87.49
  },
  {
    "date": "2025-05-04",
    "roofmaxx_kc_roof_restoration": 110.63,
    "kc_roof_restoration": 86.67,
    "roofmaxx_storm_damage": 126.29,
    "roof_maintenance_services": 68.08,
    "commercial_roofing_kc": 96.92
  },
  {
    "date": "2025-05-05",
    "roofmaxx_kc_roof_restoration": 153.56,
    "kc_roof_restoration": 143.58,
    "roofmaxx_storm_damage": 258.25,
    "roof_maintenance_services": 105.28,
    "commercial_roofing_kc": 159.21
  },
  {
    "date": "2025-05-06",
    "roofmaxx_kc_roof_restoration": 187.85,
    "kc_roof_restoration": 127.36,
    "roofmaxx_storm_damage": 190.63,
    "roof_maintenance_services": 94.63,
    "commercial_roofing_kc": 144.32
  },
  {
    "date": "2025-05-07",
    "roofmaxx_kc_roof_restoration": 193.49,
    "kc_roof_restoration": 109.41,
    "roofmaxx_storm_damage": 239.63,
    "roof_maintenance_services": 94.21,
    "commercial_roofing_kc": 123.44
  },
  {
    "date": "2025-05-08",
    "roofmaxx_kc_roof_restoration": 166.94,
    "kc_roof_restoration": 141.61,
    "roofmaxx_storm_damage": 217.36,
    "roof_maintenance_services": 104.33,
    "commercial_roofing_kc": 146.44
  },
  {
    "date": "2025-05-09",
    "roofmaxx_kc_roof_restoration": 162.21,
    "kc_roof_restoration": 141.04,
    "roofmaxx_storm_damage": 239.17,
    "roof_maintenance_services": 89.91,
    "commercial_roofing_kc": 119.66
  },
  {
    "date": "2025-05-10",
    "roofmaxx_kc_roof_restoration": 129.93,
    "kc_roof_restoration": 69.11,
    "roofmaxx_storm_damage": 129.69,
    "roof_maintenance_services": 70.02,
    "commercial_roofing_kc": 80.75
  },
  {
    "date": "2025-05-11",
    "roofmaxx_kc_roof_restoration": 122.35,
    "kc_roof_restoration": 94.67,
    "roofmaxx_storm_damage": 195.95,
    "roof_maintenance_services": 64.24,
    "commercial_roofing_kc": 94.19
  },
  {
    "date": "2025-05-12",
    "roofmaxx_kc_roof_restoration": 162.78,
    "kc_roof_restoration": 111.74,
    "roofmaxx_storm_damage": 180.68,
    "roof_maintenance_services": 97.14,
    "commercial_roofing_kc": 169.27
  },
  {
    "date": "2025-05-13",
    "roofmaxx_kc_roof_restoration": 201.71,
    "kc_roof_restoration": 122.05,
    "roofmaxx_storm_damage": 267.73,
    "roof_maintenance_services": 97.5,
    "commercial_roofing_kc": 158.52
  },
  {
    "date": "2025-05-14",
    "roofmaxx_kc_roof_restoration": 206.24,
    "kc_roof_restoration": 142.75,
    "roofmaxx_storm_damage": 230.64,
    "roof_maintenance_services": 95.04,
    "commercial_roofing_kc": 129.38
  },
  {
    "date": "2025-05-15",
    "roofmaxx_kc_roof_restoration": 165.9,
    "kc_roof_restoration": 111.2,
    "roofmaxx_storm_damage": 214.3,
    "roof_maintenance_services": 90.79,
    "commercial_roofing_kc": 156.17
  },
  {
    "date": "2025-05-16",
    "roofmaxx_kc_roof_restoration": 165.26,
    "kc_roof_restoration": 115.69,
    "roofmaxx_storm_damage": 199.14,
    "roof_maintenance_services": 103.36,
    "commercial_roofing_kc": 149.35
  },
  {
    "date": "2025-05-17",
    "roofmaxx_kc_roof_restoration": 108.08,
    "kc_roof_restoration": 81.71,
    "roofmaxx_storm_damage": 141.42,
    "roof_maintenance_services": 68.8,
    "commercial_roofing_kc": 111.25
  },
  {
    "date": "2025-05-18",
    "roofmaxx_kc_roof_restoration": 130.26,
    "kc_roof_restoration": 65.5,
    "roofmaxx_storm_damage": 177.79,
    "roof_maintenance_services": 61.13,
    "commercial_roofing_kc": 97.03
  },
  {
    "date": "2025-05-19",
    "roofmaxx_kc_roof_restoration": 169.0,
    "kc_roof_restoration": 136.48,
    "roofmaxx_storm_damage": 254.06,
    "roof_maintenance_services": 101.21,
    "commercial_roofing_kc": 164.79
  },
  {
    "date": "2025-05-20",
    "roofmaxx_kc_roof_restoration": 174.89,
    "kc_roof_restoration": 106.79,
    "roofmaxx_storm_damage": 247.15,
    "roof_maintenance_services": 94.35,
    "commercial_roofing_kc": 156.52
  },
  {
    "date": "2025-05-21",
    "roofmaxx_kc_roof_restoration": 203.2,
    "kc_roof_restoration": 108.78,
    "roofmaxx_storm_damage": 286.92,
    "roof_maintenance_services": 105.63,
    "commercial_roofing_kc": 129.19
  },
  {
    "date": "2025-05-22",
    "roofmaxx_kc_roof_restoration": 192.1,
    "kc_roof_restoration": 137.08,
    "roofmaxx_storm_damage": 291.27,
    "roof_maintenance_services": 88.79,
    "commercial_roofing_kc": 125.75
  },
  {
    "date": "2025-05-23",
    "roofmaxx_kc_roof_restoration": 356.13,
    "kc_roof_restoration": 193.1,
    "roofmaxx_storm_damage": 515.57,
    "roof_maintenance_services": 160.08,
    "commercial_roofing_kc": 270.04
  },
  {
    "date": "2025-05-24",
    "roofmaxx_kc_roof_restoration": 214.64,
    "kc_roof_restoration": 158.03,
    "roofmaxx_storm_damage": 355.09,
    "roof_maintenance_services": 127.82,
    "commercial_roofing_kc": 166.94
  },
  {
    "date": "2025-05-25",
    "roofmaxx_kc_roof_restoration": 221.86,
    "kc_roof_restoration": 119.4,
    "roofmaxx_storm_damage": 268.22,
    "roof_maintenance_services": 118.76,
    "commercial_roofing_kc": 146.48
  },
  {
    "date": "2025-05-26",
    "roofmaxx_kc_roof_restoration": 366.8,
    "kc_roof_restoration": 213.2,
    "roofmaxx_storm_damage": 475.2,
    "roof_maintenance_services": 178.26,
    "commercial_roofing_kc": 218.61
  },
  {
    "date": "2025-05-27",
    "roofmaxx_kc_roof_restoration": 353.04,
    "kc_roof_restoration": 224.04,
    "roofmaxx_storm_damage": 412.48,
    "roof_maintenance_services": 190.11,
    "commercial_roofing_kc": 291.01
  },
  {
    "date": "2025-05-28",
    "roofmaxx_kc_roof_restoration": 378.52,
    "kc_roof_restoration": 226.86,
    "roofmaxx_storm_damage": 484.09,
    "roof_maintenance_services": 165.18,
    "commercial_roofing_kc": 252.53
  },
  {
    "date": "2025-05-29",
    "roofmaxx_kc_roof_restoration": 156.24,
    "kc_roof_restoration": 142.19,
    "roofmaxx_storm_damage": 224.94,
    "roof_maintenance_services": 107.16,
    "commercial_roofing_kc": 135.58
  },
  {
    "date": "2025-05-30",
    "roofmaxx_kc_roof_restoration": 171.47,
    "kc_roof_restoration": 120.76,
    "roofmaxx_storm_damage": 182.59,
    "roof_maintenance_services": 89.05,
    "commercial_roofing_kc": 133.34
  },
  {
    "date": "2025-05-31",
    "roofmaxx_kc_roof_restoration": 104.11,
    "kc_roof_restoration": 83.76,
    "roofmaxx_storm_damage": 165.65,
    "roof_maintenance_services": 64.38,
    "commercial_roofing_kc": 93.87
  },
  {
    "date": "2025-06-01",
    "roofmaxx_kc_roof_restoration": 113.95,
    "kc_roof_restoration": 84.2,
    "roofmaxx_storm_damage": 134.0,
    "roof_maintenance_services": 65.62,
    "commercial_roofing_kc": 90.11
  },
  {
    "date": "2025-06-02",
    "roofmaxx_kc_roof_restoration": 203.89,
    "kc_roof_restoration": 141.6,
    "roofmaxx_storm_damage": 240.8,
    "roof_maintenance_services": 107.82,
    "commercial_roofing_kc": 142.48
  },
  {
    "date": "2025-06-03",
    "roofmaxx_kc_roof_restoration": 189.24,
    "kc_roof_restoration": 134.87,
    "roofmaxx_storm_damage": 227.6,
    "roof_maintenance_services": 101.23,
    "commercial_roofing_kc": 141.45
  },
  {
    "date": "2025-06-04",
    "roofmaxx_kc_roof_restoration": 175.29,
    "kc_roof_restoration": 100.41,
    "roofmaxx_storm_damage": 273.36,
    "roof_maintenance_services": 103.08,
    "commercial_roofing_kc": 157.52
  },
  {
    "date": "2025-06-05",
    "roofmaxx_kc_roof_restoration": 208.34,
    "kc_roof_restoration": 100.75,
    "roofmaxx_storm_damage": 228.79,
    "roof_maintenance_services": 108.22,
    "commercial_roofing_kc": 134.19
  },
  {
    "date": "2025-06-06",
    "roofmaxx_kc_roof_restoration": 205.38,
    "kc_roof_restoration": 106.93,
    "roofmaxx_storm_damage": 207.38,
    "roof_maintenance_services": 98.44,
    "commercial_roofing_kc": 166.45
  },
  {
    "date": "2025-06-07",
    "roofmaxx_kc_roof_restoration": 119.56,
    "kc_roof_restoration": 71.15,
    "roofmaxx_storm_damage": 178.07,
    "roof_maintenance_services": 65.13,
    "commercial_roofing_kc": 109.86
  },
  {
    "date": "2025-06-08",
    "roofmaxx_kc_roof_restoration": 123.21,
    "kc_roof_restoration": 87.69,
    "roofmaxx_storm_damage": 138.98,
    "roof_maintenance_services": 66.46,
    "commercial_roofing_kc": 107.43
  },
  {
    "date": "2025-06-09",
    "roofmaxx_kc_roof_restoration": 210.02,
    "kc_roof_restoration": 99.64,
    "roofmaxx_storm_damage": 212.87,
    "roof_maintenance_services": 102.94,
    "commercial_roofing_kc": 128.47
  },
  {
    "date": "2025-06-10",
    "roofmaxx_kc_roof_restoration": 167.79,
    "kc_roof_restoration": 129.02,
    "roofmaxx_storm_damage": 258.82,
    "roof_maintenance_services": 106.4,
    "commercial_roofing_kc": 165.79
  },
  {
    "date": "2025-06-11",
    "roofmaxx_kc_roof_restoration": 206.36,
    "kc_roof_restoration": 120.26,
    "roofmaxx_storm_damage": 228.7,
    "roof_maintenance_services": 107.25,
    "commercial_roofing_kc": 151.94
  },
  {
    "date": "2025-06-12",
    "roofmaxx_kc_roof_restoration": 204.59,
    "kc_roof_restoration": 102.1,
    "roofmaxx_storm_damage": 253.85,
    "roof_maintenance_services": 106.4,
    "commercial_roofing_kc": 125.6
  },
  {
    "date": "2025-06-13",
    "roofmaxx_kc_roof_restoration": 195.99,
    "kc_roof_restoration": 137.65,
    "roofmaxx_storm_damage": 203.05,
    "roof_maintenance_services": 91.38,
    "commercial_roofing_kc": 138.44
  },
  {
    "date": "2025-06-14",
    "roofmaxx_kc_roof_restoration": 129.53,
    "kc_roof_restoration": 87.67,
    "roofmaxx_storm_damage": 125.37,
    "roof_maintenance_services": 73.07,
    "commercial_roofing_kc": 94.95
  },
  {
    "date": "2025-06-15",
    "roofmaxx_kc_roof_restoration": 108.81,
    "kc_roof_restoration": 80.88,
    "roofmaxx_storm_damage": 188.45,
    "roof_maintenance_services": 71.97,
    "commercial_roofing_kc": 112.51
  },
  {
    "date": "2025-06-16",
    "roofmaxx_kc_roof_restoration": 197.66,
    "kc_roof_restoration": 113.71,
    "roofmaxx_storm_damage": 206.67,
    "roof_maintenance_services": 92.06,
    "commercial_roofing_kc": 144.44
  },
  {
    "date": "2025-06-17",
    "roofmaxx_kc_roof_restoration": 185.51,
    "kc_roof_restoration": 119.7,
    "roofmaxx_storm_damage": 243.62,
    "roof_maintenance_services": 97.1,
    "commercial_roofing_kc": 133.83
  },
  {
    "date": "2025-06-18",
    "roofmaxx_kc_roof_restoration": 171.51,
    "kc_roof_restoration": 104.22,
    "roofmaxx_storm_damage": 208.16,
    "roof_maintenance_services": 95.85,
    "commercial_roofing_kc": 158.87
  },
  {
    "date": "2025-06-19",
    "roofmaxx_kc_roof_restoration": 181.39,
    "kc_roof_restoration": 145.05,
    "roofmaxx_storm_damage": 198.58,
    "roof_maintenance_services": 91.66,
    "commercial_roofing_kc": 124.96
  },
  {
    "date": "2025-06-20",
    "roofmaxx_kc_roof_restoration": 190.61,
    "kc_roof_restoration": 143.31,
    "roofmaxx_storm_damage": 236.84,
    "roof_maintenance_services": 109.27,
    "commercial_roofing_kc": 150.1
  },
  {
    "date": "2025-06-21",
    "roofmaxx_kc_roof_restoration": 141.77,
    "kc_roof_restoration": 72.57,
    "roofmaxx_storm_damage": 129.86,
    "roof_maintenance_services": 68.64,
    "commercial_roofing_kc": 100.08
  },
  {
    "date": "2025-06-22",
    "roofmaxx_kc_roof_restoration": 247.38,
    "kc_roof_restoration": 142.15,
    "roofmaxx_storm_damage": 353.69,
    "roof_maintenance_services": 128.92,
    "commercial_roofing_kc": 149.91
  },
  {
    "date": "2025-06-23",
    "roofmaxx_kc_roof_restoration": 380.04,
    "kc_roof_restoration": 263.24,
    "roofmaxx_storm_damage": 376.94,
    "roof_maintenance_services": 185.09,
    "commercial_roofing_kc": 251.44
  },
  {
    "date": "2025-06-24",
    "roofmaxx_kc_roof_restoration": 384.53,
    "kc_roof_restoration": 214.65,
    "roofmaxx_storm_damage": 399.91,
    "roof_maintenance_services": 177.34,
    "commercial_roofing_kc": 266.16
  },
  {
    "date": "2025-06-25",
    "roofmaxx_kc_roof_restoration": 369.25,
    "kc_roof_restoration": 178.86,
    "roofmaxx_storm_damage": 517.12,
    "roof_maintenance_services": 164.07,
    "commercial_roofing_kc": 301.59
  },
  {
    "date": "2025-06-26",
    "roofmaxx_kc_roof_restoration": 316.49,
    "kc_roof_restoration": 181.49,
    "roofmaxx_storm_damage": 410.83,
    "roof_maintenance_services": 183.14,
    "commercial_roofing_kc": 305.24
  },
  {
    "date": "2025-06-27",
    "roofmaxx_kc_roof_restoration": 304.87,
    "kc_roof_restoration": 205.32,
    "roofmaxx_storm_damage": 385.72,
    "roof_maintenance_services": 197.56,
    "commercial_roofing_kc": 309.91
  },
  {
    "date": "2025-06-28",
    "roofmaxx_kc_roof_restoration": 140.14,
    "kc_roof_restoration": 92.79,
    "roofmaxx_storm_damage": 134.28,
    "roof_maintenance_services": 72.39,
    "commercial_roofing_kc": 115.42
  },
  {
    "date": "2025-06-29",
    "roofmaxx_kc_roof_restoration": 106.91,
    "kc_roof_restoration": 84.0,
    "roofmaxx_storm_damage": 186.34,
    "roof_maintenance_services": 65.29,
    "commercial_roofing_kc": 96.68
  },
  {
    "date": "2025-06-30",
    "roofmaxx_kc_roof_restoration": 177.48,
    "kc_roof_restoration": 118.0,
    "roofmaxx_storm_damage": 224.01,
    "roof_maintenance_services": 107.6,
    "commercial_roofing_kc": 173.08
  },
  {
    "date": "2025-07-01",
    "roofmaxx_kc_roof_restoration": 211.52,
    "kc_roof_restoration": 135.97,
    "roofmaxx_storm_damage": 178.14,
    "roof_maintenance_services": 97.07,
    "commercial_roofing_kc": 158.73
  },
  {
    "date": "2025-07-02",
    "roofmaxx_kc_roof_restoration": 160.51,
    "kc_roof_restoration": 146.37,
    "roofmaxx_storm_damage": 226.47,
    "roof_maintenance_services": 100.08,
    "commercial_roofing_kc": 152.76
  },
  {
    "date": "2025-07-03",
    "roofmaxx_kc_roof_restoration": 172.12,
    "kc_roof_restoration": 116.72,
    "roofmaxx_storm_damage": 227.75,
    "roof_maintenance_services": 95.27,
    "commercial_roofing_kc": 158.44
  },
  {
    "date": "2025-07-04",
    "roofmaxx_kc_roof_restoration": 210.87,
    "kc_roof_restoration": 108.36,
    "roofmaxx_storm_damage": 279.37,
    "roof_maintenance_services": 105.69,
    "commercial_roofing_kc": 166.71
  },
  {
    "date": "2025-07-05",
    "roofmaxx_kc_roof_restoration": 129.8,
    "kc_roof_restoration": 78.58,
    "roofmaxx_storm_damage": 151.07,
    "roof_maintenance_services": 64.5,
    "commercial_roofing_kc": 109.44
  },
  {
    "date": "2025-07-06",
    "roofmaxx_kc_roof_restoration": 113.51,
    "kc_roof_restoration": 95.45,
    "roofmaxx_storm_damage": 125.5,
    "roof_maintenance_services": 64.25,
    "commercial_roofing_kc": 95.44
  },
  {
    "date": "2025-07-07",
    "roofmaxx_kc_roof_restoration": 197.54,
    "kc_roof_restoration": 109.35,
    "roofmaxx_storm_damage": 202.69,
    "roof_maintenance_services": 101.77,
    "commercial_roofing_kc": 139.05
  },
  {
    "date": "2025-07-08",
    "roofmaxx_kc_roof_restoration": 200.01,
    "kc_roof_restoration": 116.62,
    "roofmaxx_storm_damage": 197.18,
    "roof_maintenance_services": 111.32,
    "commercial_roofing_kc": 124.59
  },
  {
    "date": "2025-07-09",
    "roofmaxx_kc_roof_restoration": 214.99,
    "kc_roof_restoration": 141.16,
    "roofmaxx_storm_damage": 283.66,
    "roof_maintenance_services": 108.88,
    "commercial_roofing_kc": 170.24
  },
  {
    "date": "2025-07-10",
    "roofmaxx_kc_roof_restoration": 179.83,
    "kc_roof_restoration": 100.94,
    "roofmaxx_storm_damage": 223.61,
    "roof_maintenance_services": 112.7,
    "commercial_roofing_kc": 158.42
  },
  {
    "date": "2025-07-11",
    "roofmaxx_kc_roof_restoration": 205.55,
    "kc_roof_restoration": 120.01,
    "roofmaxx_storm_damage": 231.12,
    "roof_maintenance_services": 94.74,
    "commercial_roofing_kc": 157.42
  },
  {
    "date": "2025-07-12",
    "roofmaxx_kc_roof_restoration": 115.39,
    "kc_roof_restoration": 73.83,
    "roofmaxx_storm_damage": 125.0,
    "roof_maintenance_services": 67.02,
    "commercial_roofing_kc": 82.98
  },
  {
    "date": "2025-07-13",
    "roofmaxx_kc_roof_restoration": 131.0,
    "kc_roof_restoration": 86.98,
    "roofmaxx_storm_damage": 152.1,
    "roof_maintenance_services": 70.71,
    "commercial_roofing_kc": 100.18
  },
  {
    "date": "2025-07-14",
    "roofmaxx_kc_roof_restoration": 189.54,
    "kc_roof_restoration": 134.73,
    "roofmaxx_storm_damage": 274.48,
    "roof_maintenance_services": 107.38,
    "commercial_roofing_kc": 140.45
  },
  {
    "date": "2025-07-15",
    "roofmaxx_kc_roof_restoration": 187.2,
    "kc_roof_restoration": 129.7,
    "roofmaxx_storm_damage": 272.76,
    "roof_maintenance_services": 111.15,
    "commercial_roofing_kc": 153.21
  },
  {
    "date": "2025-07-16",
    "roofmaxx_kc_roof_restoration": 214.41,
    "kc_roof_restoration": 125.25,
    "roofmaxx_storm_damage": 245.96,
    "roof_maintenance_services": 94.75,
    "commercial_roofing_kc": 166.46
  },
  {
    "date": "2025-07-17",
    "roofmaxx_kc_roof_restoration": 193.54,
    "kc_roof_restoration": 105.63,
    "roofmaxx_storm_damage": 267.28,
    "roof_maintenance_services": 111.04,
    "commercial_roofing_kc": 169.03
  },
  {
    "date": "2025-07-18",
    "roofmaxx_kc_roof_restoration": 212.94,
    "kc_roof_restoration": 134.61,
    "roofmaxx_storm_damage": 195.76,
    "roof_maintenance_services": 93.64,
    "commercial_roofing_kc": 154.95
  },
  {
    "date": "2025-07-19",
    "roofmaxx_kc_roof_restoration": 141.91,
    "kc_roof_restoration": 97.32,
    "roofmaxx_storm_damage": 144.94,
    "roof_maintenance_services": 64.39,
    "commercial_roofing_kc": 108.7
  },
  {
    "date": "2025-07-20",
    "roofmaxx_kc_roof_restoration": 143.39,
    "kc_roof_restoration": 98.24,
    "roofmaxx_storm_damage": 185.06,
    "roof_maintenance_services": 67.6,
    "commercial_roofing_kc": 107.9
  },
  {
    "date": "2025-07-21",
    "roofmaxx_kc_roof_restoration": 181.88,
    "kc_roof_restoration": 132.48,
    "roofmaxx_storm_damage": 265.48,
    "roof_maintenance_services": 107.41,
    "commercial_roofing_kc": 164.71
  },
  {
    "date": "2025-07-22",
    "roofmaxx_kc_roof_restoration": 208.04,
    "kc_roof_restoration": 114.48,
    "roofmaxx_storm_damage": 267.85,
    "roof_maintenance_services": 101.67,
    "commercial_roofing_kc": 153.17
  },
  {
    "date": "2025-07-23",
    "roofmaxx_kc_roof_restoration": 187.9,
    "kc_roof_restoration": 110.16,
    "roofmaxx_storm_damage": 233.34,
    "roof_maintenance_services": 109.54,
    "commercial_roofing_kc": 154.18
  },
  {
    "date": "2025-07-24",
    "roofmaxx_kc_roof_restoration": 196.18,
    "kc_roof_restoration": 131.75,
    "roofmaxx_storm_damage": 274.11,
    "roof_maintenance_services": 99.29,
    "commercial_roofing_kc": 167.65
  },
  {
    "date": "2025-07-25",
    "roofmaxx_kc_roof_restoration": 206.37,
    "kc_roof_restoration": 143.12,
    "roofmaxx_storm_damage": 214.52,
    "roof_maintenance_services": 103.01,
    "commercial_roofing_kc": 157.41
  },
  {
    "date": "2025-07-26",
    "roofmaxx_kc_roof_restoration": 133.85,
    "kc_roof_restoration": 98.15,
    "roofmaxx_storm_damage": 164.24,
    "roof_maintenance_services": 75.98,
    "commercial_roofing_kc": 112.5
  },
  {
    "date": "2025-07-27",
    "roofmaxx_kc_roof_restoration": 141.59,
    "kc_roof_restoration": 80.15,
    "roofmaxx_storm_damage": 193.71,
    "roof_maintenance_services": 64.17,
    "commercial_roofing_kc": 83.38
  },
  {
    "date": "2025-07-28",
    "roofmaxx_kc_roof_restoration": 168.47,
    "kc_roof_restoration": 139.83,
    "roofmaxx_storm_damage": 266.52,
    "roof_maintenance_services": 103.66,
    "commercial_roofing_kc": 160.77
  },
  {
    "date": "2025-07-29",
    "roofmaxx_kc_roof_restoration": 204.81,
    "kc_roof_restoration": 143.85,
    "roofmaxx_storm_damage": 283.67,
    "roof_maintenance_services": 100.6,
    "commercial_roofing_kc": 174.97
  },
  {
    "date": "2025-07-30",
    "roofmaxx_kc_roof_restoration": 205.93,
    "kc_roof_restoration": 133.0,
    "roofmaxx_storm_damage": 243.13,
    "roof_maintenance_services": 98.22,
    "commercial_roofing_kc": 154.8
  },
  {
    "date": "2025-07-31",
    "roofmaxx_kc_roof_restoration": 204.13,
    "kc_roof_restoration": 127.88,
    "roofmaxx_storm_damage": 281.13,
    "roof_maintenance_services": 107.86,
    "commercial_roofing_kc": 149.87
  },
  {
    "date": "2025-08-01",
    "roofmaxx_kc_roof_restoration": 217.49,
    "kc_roof_restoration": 108.25,
    "roofmaxx_storm_damage": 190.07,
    "roof_maintenance_services": 114.22,
    "commercial_roofing_kc": 144.26
  }
];
        
        // Chart configuration
        let chartData = sampleData;
        let series = [];
        let svg, xScale, yScale, line, formatTime;
        
        // Chart dimensions
        const margin = { top: 20, right: 60, bottom: 60, left: 60 };
        const width = 1100 - margin.left - margin.right;
        const height = 400 - margin.top - margin.bottom;
        
        // LocalBase color scheme for lines
        const colorScale = d3.scaleOrdinal([
            '#5F8DFF', '#5DD6C7', '#FFB366', '#B794F6', '#7BA4FF'
        ]);
        
        function initializeChart(data = chartData) {
            // Parse data
            formatTime = d3.timeFormat("%b %d, %Y");
            
            console.log("üîç First data record:", data[0]);
            
            const processedData = data.map(d => {
                // Use native JavaScript Date parsing which works better with YYYY-MM-DD format
                const parsedDate = new Date(d.date);
                const isValid = parsedDate instanceof Date && !isNaN(parsedDate.getTime());
                console.log("üìÖ Parsing date:", d.date, "‚Üí", parsedDate, "valid:", isValid);
                return {
                    date: parsedDate,
                    isValid: isValid,
                    ...d
                };
            }).filter(d => d.isValid).sort((a, b) => a.date - b.date);
            
            console.log("üìä Processed data count:", processedData.length);
            console.log("üìä First processed record:", processedData[0]);
            
            // Get series keys (all keys except 'date')
            const seriesKeys = Object.keys(data[0]).filter(key => key !== 'date');
            console.log("üìà Series keys:", seriesKeys);
            
            // Transform data for D3
            series = seriesKeys.map(key => ({
                name: key,
                displayName: key.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase()),
                values: processedData.map(d => ({
                    date: d.date,
                    value: +d[key] || 0
                })),
                visible: true
            }));
            
            console.log("üìä First series values sample:", series[0].values.slice(0, 3));
            
            // Set up SVG
            d3.select("#chartSvg").selectAll("*").remove();
            svg = d3.select("#chartSvg")
                .append("g")
                .attr("transform", `translate(${margin.left},${margin.top})`);
            
            // Set up scales
            const dateExtent = d3.extent(processedData, d => d.date);
            console.log("üìÖ Date extent:", dateExtent);
            
            xScale = d3.scaleTime()
                .domain(dateExtent)
                .range([0, width]);
            
            const maxValue = d3.max(series, s => d3.max(s.values, d => d.value));
            console.log("üìä Max value:", maxValue);
            
            yScale = d3.scaleLinear()
                .domain([0, maxValue])
                .nice()
                .range([height, 0]);
                
            console.log("üìä Scales created - xScale domain:", xScale.domain(), "yScale domain:", yScale.domain());
            
            // Line generator
            line = d3.line()
                .x(d => {
                    const x = xScale(d.date);
                    if (isNaN(x)) {
                        console.log("‚ùå NaN x-coordinate for date:", d.date, "parsed as:", d.date);
                    }
                    return x;
                })
                .y(d => {
                    const y = yScale(d.value);
                    if (isNaN(y)) {
                        console.log("‚ùå NaN y-coordinate for value:", d.value);
                    }
                    return y;
                })
                .curve(d3.curveMonotoneX);
            
            drawChart();
            createLegend();
        }
        
        function drawChart() {
            console.log("üé® Drawing chart...");
            console.log("üìä Series data:", series.length, "series");
            console.log("üìä Width/Height:", width, "x", height);
            
            // Add grid lines
            svg.append("g")
                .attr("class", "grid")
                .selectAll("line")
                .data(yScale.ticks())
                .enter().append("line")
                .attr("class", "grid-line")
                .attr("x1", 0)
                .attr("x2", width)
                .attr("y1", d => yScale(d))
                .attr("y2", d => yScale(d));
            
            // Add axes
            svg.append("g")
                .attr("class", "axis")
                .attr("transform", `translate(0,${height})`)
                .call(d3.axisBottom(xScale).tickFormat(d3.timeFormat("%b %d")));
            
            svg.append("g")
                .attr("class", "axis")
                .call(d3.axisLeft(yScale).tickFormat(d => `$${d}`));
            
            // Add lines
            const lineGroups = svg.selectAll(".line-group")
                .data(series)
                .enter().append("g")
                .attr("class", "line-group");
            
            console.log("üìà Creating", series.length, "line paths");
            
            lineGroups.append("path")
                .attr("class", "line")
                .attr("d", d => {
                    const path = line(d.values);
                    console.log("üìà Line path for", d.name, ":", path ? "‚úÖ Valid" : "‚ùå Invalid");
                    return path;
                })
                .style("stroke", (d, i) => {
                    const color = colorScale(i);
                    console.log("üé® Color for", d.name, ":", color);
                    return color;
                })
                .style("stroke-width", "3px")
                .style("fill", "none")
                .style("opacity", d => d.visible ? 1 : 0);
            
            console.log("‚úÖ Chart drawing complete");
            addInteractivity();
        }
        
        function addInteractivity() {
            const tooltip = d3.select("#tooltip");
            
            // Hover line
            const hoverLine = svg.append("line")
                .attr("class", "hover-line")
                .attr("y1", 0)
                .attr("y2", height);
            
            // Mouse events
            svg.append("rect")
                .attr("width", width)
                .attr("height", height)
                .style("fill", "none")
                .style("pointer-events", "all")
                .on("mouseover", function() {
                    hoverLine.style("opacity", 1);
                })
                .on("mouseout", function() {
                    hoverLine.style("opacity", 0);
                    tooltip.style("opacity", 0);
                })
                .on("mousemove", function(event) {
                    const [mouseX] = d3.pointer(event, this);
                    const date = xScale.invert(mouseX);
                    
                    // Find closest data point
                    const bisectDate = d3.bisector(d => d.date).left;
                    const dataIndex = bisectDate(chartData.map(d => new Date(d.date)), date, 1);
                    const d0 = chartData[dataIndex - 1];
                    const d1 = chartData[dataIndex];
                    const d = date - new Date(d0?.date) > new Date(d1?.date) - date ? d1 : d0;
                    
                    if (d) {
                        hoverLine
                            .attr("x1", xScale(new Date(d.date)))
                            .attr("x2", xScale(new Date(d.date)));
                        
                        // Show tooltip
                        const seriesKeys = Object.keys(d).filter(key => key !== 'date');
                        const tooltipContent = `
                            <div class="tooltip-title">${formatTime(new Date(d.date))}</div>
                            ${seriesKeys.map((key, i) => `
                                <div class="tooltip-item">
                                    <div class="tooltip-color" style="background: ${colorScale(i)}"></div>
                                    <span>${key.replace(/_/g, ' ')}: ${(d[key] || 0).toFixed(2)}</span>
                                </div>
                            `).join('')}
                        `;
                        
                        tooltip
                            .html(tooltipContent)
                            .style("left", (event.pageX + 10) + "px")
                            .style("top", (event.pageY - 10) + "px")
                            .style("opacity", 1);
                    }
                });
        }
        
        function createLegend() {
            const legend = d3.select("#legend");
            legend.selectAll("*").remove();
            
            const legendItems = legend.selectAll(".legend-item")
                .data(series)
                .enter().append("div")
                .attr("class", "legend-item")
                .on("click", function(event, d) {
                    d.visible = !d.visible;
                    updateChart();
                    updateLegend();
                });
            
            legendItems.append("div")
                .attr("class", "legend-color")
                .style("background", (d, i) => colorScale(i));
            
            legendItems.append("span")
                .attr("class", "legend-label")
                .text(d => d.displayName);
        }
        
        function updateChart() {
            svg.selectAll(".line")
                .style("opacity", d => d.visible ? 1 : 0);
        }
        
        function updateLegend() {
            d3.select("#legend").selectAll(".legend-item")
                .style("opacity", d => d.visible ? 1 : 0.5);
        }
        
        function toggleAllLines() {
            const allVisible = series.every(d => d.visible);
            series.forEach(d => d.visible = !allVisible);
            updateChart();
            updateLegend();
        }
        
        function resetZoom() {
            initializeChart();
        }
        
        function exportData() {
            const csvContent = "data:text/csv;charset=utf-8," 
                + "date," + Object.keys(chartData[0]).filter(k => k !== 'date').join(',') + "\n"
                + chartData.map(row => Object.values(row).join(',')).join('\n');
            
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "multi_line_chart_data.csv");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
        
        function exportImage() {
            // SVG to PNG export functionality would go here
            alert('PNG export feature coming soon!');
        }
        
        // Initialize chart when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log("üìä Initializing Google Ads chart...");
            console.log("üìä Sample data:", sampleData.length, "records");
            console.log("üìä Chart data:", chartData.length, "records");
            
            // Add a small delay to ensure D3 is ready
            setTimeout(() => {
                try {
                    initializeChart();
                    console.log("‚úÖ Chart initialized successfully!");
                } catch (error) {
                    console.error("‚ùå Chart initialization failed:", error);
                }
            }, 100);
        });
        
        // Time range filter
        document.getElementById('timeRange').addEventListener('change', function() {
            // Time filtering logic would be implemented here
            console.log('Time range changed to:', this.value);
        });
    </script>
</body>
</html>